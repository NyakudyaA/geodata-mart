{% extends "base.html" %}
{% load static i18n %}
{% load render_table from django_tables2 %}
{% block extrahead %}
{% endblock extrahead %}

{% block content %}
<main>
  {% include "components/_authenticate.html" %}

  {% comment %} {% render_table jobs %} {% endcomment %}
  {% render_table table %}

  {% if not jobs|length > 0 %}
  <section class="py-5 text-center container">
    <div class="row py-lg-5">
      <div class="col-lg-6 col-md-8 mx-auto">
        <h1 class="fw-light">{% translate "My Data" %}</h1>
        <p class="lead text-muted">
          {% translate "You do not seem to have any orders yet." %}
        </p>
      </div>
    </div>
  </section>
  {% endif %}

  <div class="py-5">
    <div class="container">
      {% for job in jobs %}
      <div>
        <ul>
          {% for name, value in job.get_fields %}
          {% if name == 'job_id' %}
          <li>Job: <a href="{% url 'maps:job' value %}">{{ value }}</a></li>
          <li>Checkout: <a href="{% url 'maps:checkout' value %}">{{ value }}</a></li>
          {% else %}
          <li>{{ name }}: {{ value }}</li>
          {% endif %}
          {% endfor %}
          {% for result in results %}
          {% if result.job_id == job %}
          <li>Result:
            <a href="{{ result.file_object.url }}">
              {{ result.file_name }}
            </a>
          </li>
          {% else %}
          <li>No results for job</li>
          {% endif %}
          {% endfor %}
        </ul>
      </div>
      {% endfor %}
    </div>
  </div>

</main>
{% endblock content %}
